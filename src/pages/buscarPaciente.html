<!DOCTYPE html>
<html>
<head>
  <title>Buscar paciente por nombre</title>
  <link href="style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
  <h1>Buscar paciente por nombre</h1>
  <form id="form-buscar-paciente">
    <div class="mb-3">
      <label for="nombre-paciente" class="form-label">Nombre del paciente:</label>
      <input type="text" class="form-control" id="nombre-paciente" name="nombre-paciente">
    </div>
    <button type="button" class="btn btn-primary" id="btn-buscar-paciente">Buscar</button>
    <table class="table mt-3" id="tabla-pacientes">
      <thead>
        <tr>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Edad</th>
            <th>Identificacion</th>
            <th>Telefono</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </form>
</div>
  <script>
    const formBuscarPaciente = document.getElementById('form-buscar-paciente');
    const btnBuscarPaciente = document.getElementById('btn-buscar-paciente');
    const tablaPacientes = document.getElementById('tabla-pacientes').getElementsByTagName('tbody')[0];

    formBuscarPaciente.addEventListener('submit', (event) => {
      event.preventDefault();
    });

    btnBuscarPaciente.addEventListener('click', () => {
      const nombrePaciente = document.getElementById('nombre-paciente').value;
      fetch(`/obtener-pacientes/${nombrePaciente}`)
    .then(response => response.json())
    .then(data => {
        // Limpiar la tabla de pacientes
        tablaPacientes.innerHTML = '';
        // Mostrar los resultados de la bÃºsqueda
        data.forEach(paciente => {
            const fila = document.createElement('tr');
          const nombreCell = document.createElement('td');
          const apellidoCell = document.createElement('td');
          const edadCell = document.createElement('td');
          const identificacionCell = document.createElement('td');
          const telefonoCell = document.createElement('td');
          nombreCell.textContent = paciente.nombre;
          apellidoCell.textContent = paciente.apellido;
          edadCell.textContent = paciente.edad;
          identificacionCell.textContent = paciente.identificacion;
          telefonoCell.textContent = paciente.telefono;
          fila.appendChild(nombreCell);
          fila.appendChild(apellidoCell);
          fila.appendChild(edadCell);
          fila.appendChild(identificacionCell);
          fila.appendChild(telefonoCell);
          tablaPacientes.appendChild(fila);
        });
      })
    });
  </script>
</body>
</html>